<%def name="handlebars(name)">
<script id="template-${name}" type="text/template">
<%include file="handlebars/${name}.html" /></script>
</%def>
<%inherit file="base.html" />
<%block name="header_extra">
<link rel="stylesheet/less" type="text/css" href="/public/less/index.less">
<script type="text/javascript" src="/public/js/lib/less-1.3.0.min.js"></script>
</%block>
<%block name="scripts">
##<link rel="stylesheet" href="/public/css/animate.css" />
<script type="text/javascript" charset="utf-8">
  window.current_user = ${current_user};
  window.channels = ${channels};
</script>
<script type="text/javascript" src="/public/js/lib/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="/public/js/lib/handlebars-1.0.0.beta.6.js"></script>
<script type="text/javascript" src="/public/js/lib/underscore.js"></script>
<script type="text/javascript" src="/public/js/lib/backbone.js"></script>

<!-- Load Juggernaut Client -->
<script type="text/javascript" src="http://localhost:8080/application.js"></script>

<!-- Load index script files -->
<script type="text/javascript" src="/public/coffee/index.js"></script>

${handlebars('currentsonginfo')}
${handlebars('songadd')}
${handlebars('channels')}
${handlebars('channel-songs')}
${handlebars('channel-selected')}
</%block>
<%block name="main">
  <div id="bd" class="container">

    <div id="header">
      <div class="logo">此时此刻，谁在与你收听同一首歌？</div>
      <div class="issue" id="song-add-wrapper">
        <div class="song-add">
          <a href="#" class="lnk-issue" title="我要评论" hidefocus>+</a>
        </div>
        <div class="user" style="background-image:url(http://img3.douban.com/icon/u47457510-25.jpg);"></div>
      </div>
      <div id="post-form-wrapper"></div>
    </div>

    <div id="current-song" class="song-panel">
      <div class="song-info">
          <div class="cover" style="background-image:url(http://img3.douban.com/lpic/s1686647.jpg);"></div>
          <div class="info">
              <div class="bd">
                <h2>和你在一起</h2>
                <span class="artist">李志</span>
                <!--
                  <span class="album">Diaosishidai</span>
                -->
              </div>
          </div>
      </div>
    </div> <!-- end of current song -->

    <div id="timeline"></div>
  </div>

  <!-- channels and player controller begin -->
  <div class="modal" id="channels">
    <div class="modal-header">
    </div>
    <div class="modal-body">
      <!-- List of songs. -->
    </div>
    <div class="modal-footer">
      <!--<button class="btn">Close</button>-->
      <div id="player-wrapper">
        <a href="/logout" class="btn btn-playpause" style="margin-top: -25px;">Logout</a>
        <audio id="player" src="#" controls="controls"></audio>
        <button class="btn btn-playpause" style="margin-top: -25px;">Playing</button>
        <div id="player-controller"></div>
      </div>
    </div>
  </div>
  <!-- channels end -->

  <!-- #login-form -->
  <div id="login-form" class="modal">
    <form class="form-horizontal" method="post" action="/api/login">
      <div class="modal-header">
        <button type="button" class="close">×</button>
        <h3>Login</h3>
      </div>
      <div class="modal-body">
        <div id="login-info" class="info"></div>
        <fieldset>
          <!--
          <legend>Legend text</legend>
          -->
          <div class="control-group">
            <label class="control-label" for="username">Email:</label>
            <div class="controls">
              <input type="email" class="input-xlarge" name="username" id="username">
            </div>
          </div>
          <div class="control-group">
            <label class="control-label" for="password">Password:</label>
            <div class="controls">
              <input type="password" class="input-xlarge" name="password" id="password">
            </div>
          </div>
        </fieldset>
      </div>
      <div class="modal-footer">
        <button type="submit" class="btn">Submit(debug)</button>
        <button id="login-submit" class="btn btn-primary">Save Changes(ajax)</button>
      </div>
    </form>
  </div>
  <!-- /login-form -->

  <!-- #post-bubbler model: current_playing_song -->
  <div class="modal" id="bubbler-poster" style="display: none;">
    <div class="modal-header">
        <button type="button" class="close">×</button>
    </div>
    <div class="modal-body">
    </div>
    <div class="modal-footer">
    </div>
  </div>
  <!-- /post-bubbler -->
</%block>
