// Generated by CoffeeScript 1.3.3
(function() {

  jQuery(function() {
    var default_channel, io;
    jQuery('.dropdown-toggle').dropdown();
    io = new Juggernaut({
      host: document.location.hostname,
      port: 8080
    });
    io.on('connect', function() {
      return console.log('connected');
    });
    io.on('disconnect', function() {
      return console.log('disconnected');
    });
    io.on('reconnect', function() {
      return console.log('reconnecting');
    });
    default_channel = 'channel1';
    console.log('subscribing to ' + default_channel);
    io.subscribe(default_channel, function(data) {
      return $('#chat-bd').append("<tr><td>" + data.author + "</td><td>" + data.text + "</td></tr>");
    });
    return $('#postform').on('submit', function(e) {
      var message, poster;
      poster = $('#poster').val();
      message = $('#post-msg').val();
      io.publish(default_channel, {
        author: poster,
        text: message
      });
      return e.preventDefault();
    });
  });

}).call(this);
